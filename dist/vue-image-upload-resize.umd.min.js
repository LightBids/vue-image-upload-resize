(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue-image-upload-resize"]=t():e["vue-image-upload-resize"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"01f9":function(e,t,i){"use strict";var n=i("2d00"),r=i("5ca1"),a=i("2aba"),s=i("32e9"),o=i("84f2"),l=i("41a0"),c=i("7f20"),u=i("38fd"),f=i("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",g="values",m=function(){return this};e.exports=function(e,t,i,y,S,b,C){l(i,t,y);var v,w,I,P=function(e){if(!h&&e in k)return k[e];switch(e){case p:return function(){return new i(this,e)};case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},x=t+" Iterator",T=S==g,O=!1,k=e.prototype,A=k[f]||k[d]||S&&k[S],D=A||P(S),M=S?T?P("entries"):D:void 0,R="Array"==t&&k.entries||A;if(R&&(I=u(R.call(new e)),I!==Object.prototype&&I.next&&(c(I,x,!0),n||"function"==typeof I[f]||s(I,f,m))),T&&A&&A.name!==g&&(O=!0,D=function(){return A.call(this)}),n&&!C||!h&&!O&&k[f]||s(k,f,D),o[t]=D,o[x]=m,S)if(v={values:T?D:P(g),keys:b?D:P(p),entries:M},C)for(w in v)w in k||a(k,w,v[w]);else r(r.P+r.F*(h||O),t,v);return v}},"02f4":function(e,t,i){var n=i("4588"),r=i("be13");e.exports=function(e){return function(t,i){var a,s,o=String(r(t)),l=n(i),c=o.length;return l<0||l>=c?e?"":void 0:(a=o.charCodeAt(l),a<55296||a>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):a:e?o.slice(l,l+2):s-56320+(a-55296<<10)+65536)}}},"0390":function(e,t,i){"use strict";var n=i("02f4")(!0);e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"0bfb":function(e,t,i){"use strict";var n=i("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,i){var n=i("ce10"),r=i("e11e");e.exports=Object.keys||function(e){return n(e,r)}},"11e9":function(e,t,i){var n=i("52a7"),r=i("4630"),a=i("6821"),s=i("6a99"),o=i("69a8"),l=i("c69a"),c=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?c:function(e,t){if(e=a(e),t=s(t,!0),l)try{return c(e,t)}catch(i){}if(o(e,t))return r(!n.f.call(e,t),e[t])}},1495:function(e,t,i){var n=i("86cc"),r=i("cb7c"),a=i("0d58");e.exports=i("9e1e")?Object.defineProperties:function(e,t){r(e);var i,s=a(t),o=s.length,l=0;while(o>l)n.f(e,i=s[l++],t[i]);return e}},"20d0":function(e,t,i){var n;(function(r){"use strict";var a=r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype,s=r.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),o=s&&r.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),l=r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(s||l)&&r.atob&&r.ArrayBuffer&&r.Uint8Array&&function(e){var t,i,n,r,a,u,f,h,d;if(t=e.match(c),!t)throw new Error("invalid data URI");for(i=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),n=!!t[4],r=e.slice(t[0].length),a=n?atob(r):decodeURIComponent(r),u=new ArrayBuffer(a.length),f=new Uint8Array(u),h=0;h<a.length;h+=1)f[h]=a.charCodeAt(h);return s?new Blob([o?f:u],{type:i}):(d=new l,d.append(u),d.getBlob(i))};r.HTMLCanvasElement&&!a.toBlob&&(a.mozGetAsFile?a.toBlob=function(e,t,i){var n=this;setTimeout((function(){i&&a.toDataURL&&u?e(u(n.toDataURL(t,i))):e(n.mozGetAsFile("blob",t))}))}:a.toDataURL&&u&&(a.toBlob=function(e,t,i){var n=this;setTimeout((function(){e(u(n.toDataURL(t,i)))}))})),n=function(){return u}.call(t,i,t,e),void 0===n||(e.exports=n)})(window)},"214f":function(e,t,i){"use strict";i("b0c5");var n=i("2aba"),r=i("32e9"),a=i("79e5"),s=i("be13"),o=i("2b4c"),l=i("520a"),c=o("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var h=o(e),d=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),p=d?!a((function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[h](""),!t})):void 0;if(!d||!p||"replace"===e&&!u||"split"===e&&!f){var g=/./[h],m=i(s,h,""[e],(function(e,t,i,n,r){return t.exec===l?d&&!r?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}})),y=m[0],S=m[1];n(String.prototype,e,y),r(RegExp.prototype,h,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}}},"230e":function(e,t,i){var n=i("d3f4"),r=i("7726").document,a=n(r)&&n(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},"23c6":function(e,t,i){var n=i("2d95"),r=i("2b4c")("toStringTag"),a="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=s(t=Object(e),r))?i:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},"28a5":function(e,t,i){"use strict";var n=i("aae3"),r=i("cb7c"),a=i("ebd6"),s=i("0390"),o=i("9def"),l=i("5f1b"),c=i("520a"),u=i("79e5"),f=Math.min,h=[].push,d="split",p="length",g="lastIndex",m=4294967295,y=!u((function(){RegExp(m,"y")}));i("214f")("split",2,(function(e,t,i,u){var S;return S="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[p]||2!="ab"[d](/(?:ab)*/)[p]||4!="."[d](/(.?)(.?)/)[p]||"."[d](/()()/)[p]>1||""[d](/.?/)[p]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return i.call(r,e,t);var a,s,o,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,d=void 0===t?m:t>>>0,y=new RegExp(e.source,u+"g");while(a=c.call(y,r)){if(s=y[g],s>f&&(l.push(r.slice(f,a.index)),a[p]>1&&a.index<r[p]&&h.apply(l,a.slice(1)),o=a[0][p],f=s,l[p]>=d))break;y[g]===a.index&&y[g]++}return f===r[p]?!o&&y.test("")||l.push(""):l.push(r.slice(f)),l[p]>d?l.slice(0,d):l}:"0"[d](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,n){var r=e(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,r,n):S.call(String(r),i,n)},function(e,t){var n=u(S,e,this,t,S!==i);if(n.done)return n.value;var c=r(e),h=String(this),d=a(c,RegExp),p=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(y?"y":"g"),b=new d(y?c:"^(?:"+c.source+")",g),C=void 0===t?m:t>>>0;if(0===C)return[];if(0===h.length)return null===l(b,h)?[h]:[];var v=0,w=0,I=[];while(w<h.length){b.lastIndex=y?w:0;var P,x=l(b,y?h:h.slice(w));if(null===x||(P=f(o(b.lastIndex+(y?0:w)),h.length))===v)w=s(h,w,p);else{if(I.push(h.slice(v,w)),I.length===C)return I;for(var T=1;T<=x.length-1;T++)if(I.push(x[T]),I.length===C)return I;w=v=P}}return I.push(h.slice(v)),I}]}))},"2aba":function(e,t,i){var n=i("7726"),r=i("32e9"),a=i("69a8"),s=i("ca5a")("src"),o=i("fa5b"),l="toString",c=(""+o).split(l);i("8378").inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,i,o){var l="function"==typeof i;l&&(a(i,"name")||r(i,"name",t)),e[t]!==i&&(l&&(a(i,s)||r(i,s,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:o?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[s]||o.call(this)}))},"2aeb":function(e,t,i){var n=i("cb7c"),r=i("1495"),a=i("e11e"),s=i("613b")("IE_PROTO"),o=function(){},l="prototype",c=function(){var e,t=i("230e")("iframe"),n=a.length,r="<",s=">";t.style.display="none",i("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+s+"document.F=Object"+r+"/script"+s),e.close(),c=e.F;while(n--)delete c[l][a[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(o[l]=n(e),i=new o,o[l]=null,i[s]=e):i=c(),void 0===t?i:r(i,t)}},"2af9":function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return r}));var n=i("324b");
/*!
 * vue-image-upload-resize
 * Based on ImageUploader (c) Ross Turner (https://github.com/rossturner/HTML5-ImageUploader)
 * Adapted by (c) 2018 Svale Fossåskaret (http://kartoteket.as/team/svale.html / @Fossesvale)
 * @license MIT.
 */function r(e){r.installed||(r.installed=!0,e.component("ImageUploader",n["a"]))}var a={install:r},s=null;"undefined"!==typeof window?s=window.Vue:"undefined"!==typeof e&&(s=e.Vue),s&&s.use(a),n["a"].install=r,t["a"]=n["a"]}).call(this,i("c8ba"))},"2b4c":function(e,t,i){var n=i("5537")("wks"),r=i("ca5a"),a=i("7726").Symbol,s="function"==typeof a,o=e.exports=function(e){return n[e]||(n[e]=s&&a[e]||(s?a:r)("Symbol."+e))};o.store=n},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"2fdb":function(e,t,i){"use strict";var n=i("5ca1"),r=i("d2c8"),a="includes";n(n.P+n.F*i("5147")(a),"String",{includes:function(e){return!!~r(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"324b":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{directives:[{name:"show",rawName:"v-show",value:e.imagePreview,expression:"imagePreview"}],staticClass:"img-preview",attrs:{src:e.imagePreview,width:"400"}}),i("input",{class:e.className,attrs:{id:e.id,type:"file",accept:e.accept,capture:e.capture},on:{change:e.uploadFile}}),e._t("upload-label")],2)},r=[];i("7f7f"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("28a5"),i("c5f6");function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let s="undefined"!=typeof self?self:global;var o="undefined"!=typeof navigator,l=o&&"undefined"==typeof HTMLImageElement,c=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node);let u=s.Buffer,f=s.BigInt;var h=!!u;function d(e){return g(e)?void 0:e}const p=e=>void 0!==e;function g(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(p).length)}function m(e){let t=new Error(e);throw delete t.stack,t}function y(e){return""===(e=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(e).trim())?void 0:e}function S(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const b="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function C(e){return b?b.decode(e):h?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}class v{static from(e,t){return e instanceof this&&e.le===t?e:new v(e,void 0,void 0,t)}constructor(e,t=0,i,n){if("boolean"==typeof n&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===i&&(i=e.byteLength-t);let n=new DataView(e,t,i);this._swapDataView(n)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof v){void 0===i&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&m("Creating view outside of available memory in ArrayBuffer");let n=new DataView(e.buffer,t,i);this._swapDataView(n)}else if("number"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else m("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=v){return e instanceof DataView||e instanceof v?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||m("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new v(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return C(this.getUint8Array(e,t))}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return i.map(e=>String.fromCharCode(e)).join("")}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function w(e,t){m("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}class I extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||w(this.kind,e),t&&(e in t||function(e,t){m("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||w(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var P=new I("file parser"),x=new I("segment parser"),T=new I("file reader");function O(e,t){return(i=e).startsWith("data:")||i.length>1e4?A(e,t,"base64"):o?k(e,t,"url",D):c?A(e,t,"fs"):void m("Invalid input argument");var i}async function k(e,t,i,n){return T.has(i)?A(e,t,i):n?async function(e,t){let i=await t(e);return new v(i)}(e,n):void m("Parser ".concat(i," is not loaded"))}async function A(e,t,i){let n=new(T.get(i))(e,t);return await n.read(),n}async function D(e){return fetch(e).then(e=>e.arrayBuffer())}async function M(e){return new Promise((t,i)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=i,n.readAsArrayBuffer(e)})}class R extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function L(e,t,i){let n=new R;for(let[r,a]of i)n.set(r,a);if(Array.isArray(t))for(let r of t)e.set(r,n);else e.set(t,n);return n}function F(e,t,i){let n,r=e.get(t);for(n of i)r.set(n[0],n[1])}const U=new Map,E=new Map,N=new Map,B=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],G=["jfif","xmp","icc","iptc"],V=["tiff",...G],j=["ifd0","ifd1","exif","gps","interop"],_=[...V,...j],z=["makerNote","userComment"],H=["translateKeys","translateValues","reviveValues","multiSegment"],W=[...H,"sanitize","mergeOutput"];class K{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class X extends K{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),a(this,"enabled",!1),a(this,"skip",new Set),a(this,"pick",new Set),a(this,"deps",new Set),a(this,"translateKeys",!1),a(this,"translateValues",!1),a(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=j.includes(e),this.canBeFiltered&&(this.dict=U.get(e)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if("object"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:e,skip:t}=i;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:m("Invalid options argument: ".concat(i))}applyInheritables(e){let t,i;for(t of H)i=e[t],void 0!==i&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:r,tagValues:a}=this.dict;for(i of e)"string"==typeof i?(n=a.indexOf(i),-1===n&&(n=r.indexOf(Number(i))),-1!==n&&t.add(Number(r[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Z(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Z(this.pick,this.deps)}}var Y={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},q=new Map;class J extends K{static useCached(e){let t=q.get(e);return void 0!==t?t:(t=new this(e),q.set(e,t),t)}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):m("Invalid options argument ".concat(e)),void 0===this.firstChunkSize&&(this.firstChunkSize=o?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of B)this[e]=Y[e];for(e of W)this[e]=Y[e];for(e of z)this[e]=Y[e];for(e of _)this[e]=new X(e,Y[e],void 0,this)}setupFromTrue(){let e;for(e of B)this[e]=Y[e];for(e of W)this[e]=Y[e];for(e of z)this[e]=!0;for(e of _)this[e]=new X(e,!0,void 0,this)}setupFromArray(e){let t;for(t of B)this[t]=Y[t];for(t of W)this[t]=Y[t];for(t of z)this[t]=Y[t];for(t of _)this[t]=new X(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,j)}setupFromObject(e){let t;for(t of(j.ifd0=j.ifd0||j.image,j.ifd1=j.ifd1||j.thumbnail,Object.assign(this,e),B))this[t]=$(e[t],Y[t]);for(t of W)this[t]=$(e[t],Y[t]);for(t of z)this[t]=$(e[t],Y[t]);for(t of V)this[t]=new X(t,Y[t],e[t],this);for(t of j)this[t]=new X(t,Y[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,j,_),!0===e.tiff?this.batchEnableWithBool(j,!0):!1===e.tiff?this.batchEnableWithUserValue(j,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,j):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,j)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let e=t[i];this[i].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let e of n)this[e].enabled=!1;let t=Q(e,i);for(let[e,i]of t)Z(this[e].pick,i),this[e].enabled=!0}else if(t&&t.length){let e=Q(t,i);for(let[t,i]of e)Z(this[t].skip,i)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=j.some(e=>!0===this[e].enabled)||this.makerNote||this.userComment;for(let r of j)this[r].finalizeFilters()}get onlyTiff(){return!G.map(e=>this[e].enabled).some(e=>!0===e)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of V)this[e].enabled&&!x.has(e)&&w("segment parser",e)}}function Q(e,t){let i,n,r,a,s=[];for(r of t){for(a of(i=U.get(r),n=[],i))(e.includes(a[0])||e.includes(a[1]))&&n.push(a[0]);n.length&&s.push([r,n])}return s}function $(e,t){return void 0!==e?e:void 0!==t?t:void 0}function Z(e,t){for(let i of t)e.add(i)}a(J,"default",Y);class ee{constructor(e){a(this,"parsers",{}),this.options=J.useCached(e)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of P)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;m("Unknown file format")}async read(e){this.file=await function(e,t){return"string"==typeof e?O(e,t):o&&!l&&e instanceof HTMLImageElement?O(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new v(e):o&&e instanceof Blob?k(e,t,"blob",M):void m("Invalid input argument")}(e,this.options)}async parse(){this.setup(),await this.fileParser.parse();let e={},t=[],i=Object.values(this.parsers).map(async i=>{let n;if(this.options.silentErrors){try{n=await i.parse()}catch(e){t.push(e)}t.push(...i.errors)}else n=await i.parse();i.assignToOutput(e,n)});return await Promise.all(i),this.options.silentErrors&&t.length>0&&(e.errors=t),this.file.close&&this.file.close(),d(e)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=x.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),void 0===n)return;let r=await this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new i(r,e,t),s=await a.extractThumbnail();return t.close&&t.close(),s}}async function te(e,t){let i=new ee(t);return await i.read(e),i.parse()}var ie=Object.freeze({__proto__:null,parse:te,Exifr:ee,fileParsers:P,segmentParsers:x,fileReaders:T,tagKeys:U,tagValues:E,tagRevivers:N,createDictionary:L,extendDictionary:F,fetchUrlAsArrayBuffer:D,readBlobAsArrayBuffer:M,chunkedProps:B,otherSegments:G,segments:V,tiffBlocks:j,segmentsAndBlocks:_,tiffExtractables:z,inheritables:H,allFormatters:W,Options:J});class ne{constructor(e,t,i){a(this,"ensureSegmentChunk",async e=>{let t=e.start,i=e.size||65536;if(this.file.chunked)if(this.file.available(t,i))e.chunk=this.file.subarray(t,i);else try{e.chunk=await this.file.readChunk(t,i)}catch(t){m("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))}else this.file.byteLength>t+i?e.chunk=this.file.subarray(t,i):void 0===e.size?e.chunk=this.file.subarray(t):m("Segment unreachable: "+JSON.stringify(e));return e.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}createParser(e,t){let i=new(x.get(e))(t,this.options,this.file);return this.parsers[e]=i}}class re{static findPosition(e,t){let i=e.getUint16(t+2)+2,n="function"==typeof this.headerLength?this.headerLength(e,t,i):this.headerLength,r=t+n,a=i-n;return{offset:t,length:i,headerLength:n,start:r,size:a,end:r+a}}static parse(e,t={}){return new this(e,new J({[this.type]:t})).parse()}normalizeInput(e){return e instanceof v?e:new v(e)}constructor(e,t={},i){a(this,"errors",[]),a(this,"raw",new Map),a(this,"handleError",e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=N.get(t),n=E.get(t),r=U.get(t),a=this.options[t],s=a.reviveValues&&!!i,o=a.translateValues&&!!n,l=a.translateKeys&&!!r,c={};for(let[u,f]of e)s&&i.has(u)?f=i.get(u)(f):o&&n.has(u)&&(f=this.translateValue(f,n.get(u))),l&&r.has(u)&&(u=r.get(u)||u),c[u]=f;return c}translateValue(e,t){return t[e]||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}function ae(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function se(e){return e>=224&&e<=239}function oe(e,t){for(let[i,n]of x)if(n.canHandle(e,t))return i}a(re,"headerLength",4),a(re,"type",void 0),a(re,"multiSegment",!1),a(re,"canHandle",()=>!1);class le extends ne{constructor(...e){super(...e),a(this,"appSegments",[]),a(this,"jpegSegments",[]),a(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(),this.mergeMultiSegments(),this.createParsers()}async readSegments(){let e=this.appSegments.map(this.ensureSegmentChunk);await Promise.all(e)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(x.keyList())):(e=void 0===e?x.keyList().filter(e=>this.options[e].enabled):e.filter(e=>this.options[e].enabled&&x.has(e)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:r,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some(e=>{let t=x.get(e),i=this.options[e];return t.multiSegment&&i.multiSegment}),n&&await this.file.readWhole()),e=this._findAppSegments(e,i.byteLength,n,r,a),!this.options.onlyTiff&&i.chunked){let t=!1;for(;a.size>0&&!t&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:n}=i,r=this.appSegments.some(e=>!this.file.available(e.offset||e.start,e.length||e.size));if(t=e>n&&!r?!await i.readNextChunk(e):!await i.readNextChunk(n),void 0===(e=this._findAppSegments(e,i.byteLength)))return}}}_findAppSegments(e,t){t-=2;let i,n,r,a,s,o,{file:l,findAll:c,wanted:u,remaining:f,options:h}=this;for(;e<t;e++)if(255===l.getUint8(e))if(i=l.getUint8(e+1),se(i)){if(n=l.getUint16(e+2),r=oe(l,e),r&&u.has(r)&&(a=x.get(r),s=a.findPosition(l,e),o=h[r],s.type=r,this.appSegments.push(s),!c&&(a.multiSegment&&o.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||f.delete(r)):f.delete(r),0===f.size)))break;h.recordUnknownSegments&&(s=re.findPosition(l,e),s.marker=i,this.unknownSegments.push(s)),e+=n+1}else if(ae(i)){if(n=l.getUint16(e+2),218===i&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}return e}mergeMultiSegments(){if(!this.appSegments.some(e=>e.multiSegment))return;let e=function(e,t){let i,n,r,a=new Map;for(let s=0;s<e.length;s++)i=e[s],n=i[t],a.has(n)?r=a.get(n):a.set(n,r=[]),r.push(i);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([e,t])=>{let i=x.get(e,this.options);return i.handleMultiSegments?{type:e,chunk:i.handleMultiSegments(t)}:t[0]})}async createParsers(){let e=this.mergedAppSegments||this.appSegments;for(let t of e){let{type:e,chunk:i}=t;if(!this.options[e].enabled)continue;let n=this.parsers[e];if(n&&n.append);else if(!n){let t=new(x.get(e,this.options))(i,this.options,this.file);this.parsers[e]=t}}}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}a(le,"type","jpeg"),P.set("jpeg",le);const ce=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ue extends re{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:r}=this.options[t];n=new Set(n);let a=n.size>0,s=0===r.size,o=this.chunk.getUint16(e);e+=2;for(let l=0;l<o;l++){let o=this.chunk.getUint16(e);if(a){if(n.has(o)&&(i.set(o,this.parseTag(e,o,t)),n.delete(o),0===n.size))break}else!s&&r.has(o)||i.set(o,this.parseTag(e,o,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,r=n.getUint16(e+2),a=n.getUint32(e+4),s=ce[r];if(s*a<=4?e+=8:e=n.getUint32(e+8),(r<1||r>13)&&m("Invalid TIFF value type. block: ".concat(i.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(r,", offset ").concat(e)),e>n.byteLength&&m("Invalid TIFF value offset. block: ".concat(i.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(r,", offset ").concat(e," is outside of chunk size ").concat(n.byteLength)),1===r)return n.getUint8Array(e,a);if(2===r)return y(n.getString(e,a));if(7===r)return n.getUint8Array(e,a);if(1===a)return this.parseTagValue(r,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(a),i=s;for(let n=0;n<a;n++)t[n]=this.parseTagValue(r,e),e+=i;return t}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:m("Invalid tiff type ".concat(e))}}}class fe extends ue{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&m("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&m("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(this.ifd0Offset,", file.byteLength: ").concat(e.byteLength)),e.tiff&&await e.ensureChunk(this.ifd0Offset,S(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&1===i.length&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",he(...e.get(2),e.get(1))),e.set("longitude",he(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of j)if(e=this[t],!g(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}}function he(e,t,i,n){var r=e+t/60+i/3600;return"S"!==n&&"W"!==n||(r*=-1),r}a(fe,"type","tiff"),a(fe,"headerLength",10),x.set("tiff",fe);var de=Object.freeze({__proto__:null,default:ie,parse:te,Exifr:ee,fileParsers:P,segmentParsers:x,fileReaders:T,tagKeys:U,tagValues:E,tagRevivers:N,createDictionary:L,extendDictionary:F,fetchUrlAsArrayBuffer:D,readBlobAsArrayBuffer:M,chunkedProps:B,otherSegments:G,segments:V,tiffBlocks:j,segmentsAndBlocks:_,tiffExtractables:z,inheritables:H,allFormatters:W,Options:J});const pe={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ge=Object.assign({},pe,{firstChunkSize:4e4,gps:[1,2,3,4]}),me=Object.assign({},pe,{firstChunkSize:4e4,ifd0:[274]}),ye=Object.assign({},pe,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Se(e){let t=new ee(ye);await t.read(e);let i=await t.extractThumbnail();return i&&h?u.from(i):i}async function be(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}async function Ce(e){let t=new ee(ge);await t.read(e);let i=await t.parse();if(i&&i.gps){let{latitude:e,longitude:t}=i.gps;return{latitude:e,longitude:t}}}async function ve(e){let t=new ee(me);await t.read(e);let i=await t.parse();if(i&&i.ifd0)return i.ifd0[274]}const we={1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}};var Ie=!0,Pe=!0;if("object"==typeof navigator){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let[t,i,n]=e.match(/OS (\d+)_(\d+)/),r=Number(i)+.1*Number(n);Ie=r<13.4,Pe=!1}if(e.includes("Chrome/")){let[t,i]=e.match(/Chrome\/(\d+)/);Number(i)>=81&&(Ie=Pe=!1)}}async function xe(e){let t=await ve(e);return Object.assign({canvas:Ie,css:Pe},we[t])}class Te extends v{constructor(...e){super(...e),a(this,"ranges",new Oe),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(0===e&&0===this.byteLength&&i){let e=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(e)}else{let i=e+t;if(i>this.byteLength){let{dataView:e}=this._extend(i);this._swapDataView(e)}}}_extend(e){let t;t=h?u.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Oe{constructor(){a(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,r=this.list.filter(t=>ke(e,t.offset,n)||ke(e,t.end,n));if(r.length>0){e=Math.min(e,...r.map(e=>e.offset)),n=Math.max(n,...r.map(e=>e.end)),t=n-e;let i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter(e=>!r.includes(e))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(t=>t.offset<=e&&i<=t.end)}}function ke(e,t,i){return e<=t&&t<=i}class Ae extends Te{constructor(e,t){super(0),a(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}T.set("blob",class extends Ae{async readWhole(){this.chunked=!1;let e=await M(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let i=t?e+t:void 0,n=this.input.slice(e,i),r=await M(n);return this.set(r,e,!0)}});var De=Object.freeze({__proto__:null,default:de,parse:te,Exifr:ee,fileParsers:P,segmentParsers:x,fileReaders:T,tagKeys:U,tagValues:E,tagRevivers:N,createDictionary:L,extendDictionary:F,fetchUrlAsArrayBuffer:D,readBlobAsArrayBuffer:M,chunkedProps:B,otherSegments:G,segments:V,tiffBlocks:j,segmentsAndBlocks:_,tiffExtractables:z,inheritables:H,allFormatters:W,Options:J,disableAllOptions:pe,gpsOnlyOptions:ge,orientationOnlyOptions:me,thumbnailOnlyOptions:ye,thumbnail:Se,thumbnailUrl:be,gps:Ce,orientation:ve,rotations:we,get rotateCanvas(){return Ie},get rotateCss(){return Pe},rotation:xe});T.set("url",class extends Ae{async readWhole(){this.chunked=!1;let e=await D(this.input);this._swapArrayBuffer(e)}async _readChunk(e,t){let i=t?e+t-1:void 0,n={};(e||i)&&(n.range="bytes=".concat([e,i].join("-")));let r=await fetch(this.input,{headers:n}),a=await r.arrayBuffer(),s=a.byteLength;if(416!==r.status)return s!==t&&(this.size=e+s),this.set(a,e,!0)}}),v.prototype.getUint64=function(e){let t=this.getUint32(e),i=this.getUint32(e+4);return t<1048575?t<<32|i:void 0!==typeof f?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),f(t)<<f(32)|f(i)):void m("Trying to read 64b value but JS can only handle 53b numbers.")};class Me extends ne{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(t.push(i),0===i.length)break;e+=i.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find(e=>e.kind===t)}parseBoxHead(e){let t=this.file.getUint32(e),i=this.file.getString(e+4,4),n=e+8;return 1===t&&(t=this.file.getUint64(e+8),n+=8),{offset:e,length:t,kind:i,start:n}}parseBoxFullHead(e){let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class Re extends Me{static canHandle(e){if(0!==e.getUint16(0))return!1;let t=e.getUint16(2);if(t>50)return!1;let i=16,n=[];for(;i<t;)n.push(e.getString(i,4)),i+=4;return n.includes("heic")}async parse(){var e=this.file.getUint32(0);let t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,i){await this.file.ensureChunk(t,i);let n=this.file.subarray(t,i);this.createParser(e,n)}async findIcc(e){let t=this.findBox(e,"iprp");if(void 0===t)return;let i=this.findBox(t,"ipco");if(void 0===i)return;let n=this.findBox(i,"colr");void 0!==n&&await this.registerSegment("icc",n.offset+12,n.length)}async findExif(e){let t=this.findBox(e,"iinf");if(void 0===t)return;let i=this.findBox(e,"iloc");if(void 0===i)return;let n=this.findExifLocIdInIinf(t),r=this.findExtentInIloc(i,n);if(void 0===r)return;let[a,s]=r;await this.file.ensureChunk(a,s);let o=4+this.file.getUint32(a);a+=o,s-=o,await this.registerSegment("tiff",a,s)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,i,n,r,a=e.start,s=this.file.getUint16(a);for(a+=2;s--;){if(t=this.parseBoxHead(a),this.parseBoxFullHead(t),i=t.start,t.version>=2&&(n=3===t.version?4:2,r=this.file.getString(i+n+2,4),"Exif"===r))return this.file.getUintBytes(i,n);a+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let i=e.start,[n,r]=this.get8bits(i++),[a,s]=this.get8bits(i++),o=2===e.version?4:2,l=1===e.version||2===e.version?2:0,c=s+n+r,u=2===e.version?4:2,f=this.file.getUintBytes(i,u);for(i+=u;f--;){let e=this.file.getUintBytes(i,o);i+=o+l+2+a;let u=this.file.getUint16(i);if(i+=2,e===t)return u>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(i+s,n),this.file.getUintBytes(i+s+n,r)];i+=u*c}}}a(Re,"type","heic"),P.set("heic",Re),L(U,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),L(U,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),L(U,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),L(E,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Le=L(E,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Fe={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Le.set(37392,Fe),Le.set(41488,Fe);const Ue={0:"Normal",1:"Low",2:"High"};function Ee(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(e=>String.fromCharCode(e))),"0"!==t[2]&&0!==t[2]||t.pop(),t.join(".")}function Ne(e){if("string"==typeof e){var[t,i,n,r,a,s]=e.trim().split(/[-: ]/g).map(Number),o=new Date(t,i-1,n);return Number.isNaN(r)||Number.isNaN(a)||Number.isNaN(s)||(o.setHours(r),o.setMinutes(a),o.setSeconds(s)),Number.isNaN(+o)?e:o}}function Be(e){if("string"==typeof e)return e;let t=[];if(0===e[1]&&0===e[e.length-1])for(let i=0;i<e.length;i+=2)t.push(Ge(e[i+1],e[i]));else for(let i=0;i<e.length;i+=2)t.push(Ge(e[i],e[i+1]));return y(String.fromCodePoint(...t))}function Ge(e,t){return e<<8|t}Le.set(41992,Ue),Le.set(41993,Ue),Le.set(41994,Ue),L(N,["ifd0","ifd1"],[[50827,function(e){return"string"!=typeof e?C(e):e}],[306,Ne],[40091,Be],[40092,Be],[40093,Be],[40094,Be],[40095,Be]]),L(N,"exif",[[40960,Ee],[36864,Ee],[36867,Ne],[36868,Ne]]),L(N,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class Ve extends re{static canHandle(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&"http://ns.adobe.com/"===e.getString(t+4,"http://ns.adobe.com/".length)}static headerLength(e,t){return"http://ns.adobe.com/xmp/extension/"===e.getString(t+4,"http://ns.adobe.com/xmp/extension/".length)?79:4+"http://ns.adobe.com/xap/1.0/".length+1}static findPosition(e,t){let i=super.findPosition(e,t);return i.multiSegment=i.extended=79===i.headerLength,i.multiSegment?(i.chunkCount=e.getUint8(t+72),i.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map(e=>e.chunk.getString()).join("")}normalizeInput(e){return"string"==typeof e?e:e.getString&&e.getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(e){let t={"rdf:li":1,"rdf:Seq":1,"rdf:Bag":1,"rdf:Alt":1};return e.replace(qe,(e,i,n)=>"<"===i?"".concat(e,"#").concat(t[n]++):"".concat(e,"#").concat(--t[n]))}(e);let t=_e.findAll(e,"rdf","Description");0===t.length&&t.push(new _e("rdf","Description",void 0,e));let i,n={};for(let r of t)for(let e of r.properties)i=Ke(e.ns,n),ze(e,i);return function(e){let t;for(let i in e)t=e[i]=d(e[i]),void 0===t&&delete e[i];return d(e)}(n)}assignToOutput(e,t){if(this.localOptions.parse)for(let[i,n]of Object.entries(t))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",n);break;case"exif":this.assignObjectToOutput(e,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,n)}else e.xmp=t}}a(Ve,"type","xmp"),a(Ve,"multiSegment",!0),x.set("xmp",Ve);class je{static findAll(e){return Xe(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(je.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],n=e[3].slice(1,-1);return n=Ye(n),new je(t,i,n)}constructor(e,t,i){this.ns=e,this.name=t,this.value=i}serialize(){return this.value}}class _e{static findAll(e,t,i){if(void 0!==t||void 0!==i){t=t||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var n=new RegExp("<(".concat(t,"):(").concat(i,")(#\\d+)?((\\s+?[\\w\\d-:]+=(\"[^\"]*\"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)"),"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Xe(e,n).map(_e.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],n=e[4],r=e[8];return new _e(t,i,n,r)}constructor(e,t,i,n){this.ns=e,this.name=t,this.attrString=i,this.innerXml=n,this.attrs=je.findAll(i),this.children=_e.findAll(n),this.value=0===this.children.length?Ye(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return We(this.children.map(He));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let e={};for(let t of this.properties)ze(t,e);return void 0!==this.value&&(e.value=this.value),d(e)}}function ze(e,t){let i=e.serialize();void 0!==i&&(t[e.name]=i)}var He=e=>e.serialize(),We=e=>1===e.length?e[0]:e,Ke=(e,t)=>t[e]?t[e]:t[e]={};function Xe(e,t){let i,n=[];if(!e)return n;for(;null!==(i=t.exec(e));)n.push(i);return n}function Ye(e){if(function(e){return null==e||"null"===e||"undefined"===e||""===e||""===e.trim()}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let i=e.toLowerCase();return"true"===i||"false"!==i&&e.trim()}const qe=/(<|\/)(rdf:li|rdf:Seq|rdf:Bag|rdf:Alt)/g;var Je=Object.freeze({__proto__:null,default:De,parse:te,Exifr:ee,fileParsers:P,segmentParsers:x,fileReaders:T,tagKeys:U,tagValues:E,tagRevivers:N,createDictionary:L,extendDictionary:F,fetchUrlAsArrayBuffer:D,readBlobAsArrayBuffer:M,chunkedProps:B,otherSegments:G,segments:V,tiffBlocks:j,segmentsAndBlocks:_,tiffExtractables:z,inheritables:H,allFormatters:W,Options:J,disableAllOptions:pe,gpsOnlyOptions:ge,orientationOnlyOptions:me,thumbnailOnlyOptions:ye,thumbnail:Se,thumbnailUrl:be,gps:Ce,orientation:ve,rotations:we,get rotateCanvas(){return Ie},get rotateCss(){return Pe},rotation:xe});if(c)try{var Qe="function"==typeof require?Promise.resolve(require("fs").promises):import("fs").then(e=>e.promises)}catch(gt){console.warn("Couldn't load 'fs'")}T.set("fs",class extends Ae{async readWhole(){this.chunked=!1,this.fs=await Qe;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await Qe,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){void 0===this.fh&&await this.open(),e+t>this.size&&(t=this.size-e);var i=this.subarray(e,t,!0);return await this.fh.read(i.dataView,0,t,e),i}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}}),T.set("base64",class extends Ae{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let i,n,r=this.input;void 0===e?(e=0,i=0,n=0):(i=4*Math.floor(e/3),n=e-i/4*3),void 0===t&&(t=this.size);let a=e+t,s=i+4*Math.ceil(a/3);r=r.slice(i,s);let o=Math.min(t,this.size-e);if(h){let t=u.from(r,"base64").slice(n,n+o);return this.set(t,e,!0)}{let t=this.subarray(e,o,!0),i=atob(r),a=t.toUint8();for(let e=0;e<o;e++)a[e]=i.charCodeAt(n+e);return t}}});class $e extends ne{static canHandle(e,t){return 18761===t||19789===t}extendOptions(e){let{ifd0:t,xmp:i,iptc:n,icc:r}=e;i.enabled&&t.deps.add(700),n.enabled&&t.deps.add(33723),r.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:i,icc:n}=this.options;if(e.enabled||t.enabled||i.enabled||n.enabled){let e=Math.max(S(this.options),this.options.chunkSize);await this.file.ensureChunk(0,e),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e],i=v.from(t);this.options[e].enabled&&this.createParser(e,i)}}}a($e,"type","tiff"),P.set("tiff",$e),L(U,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(U,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Ze=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(U,"ifd0",Ze),F(U,"exif",Ze),L(E,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class et extends re{static canHandle(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}parse(){return{JFIFVersion:this.chunk.getUint16(0),ResolutionUnit:this.chunk.getUint8(2),XResolution:this.chunk.getUint16(3),YResolution:this.chunk.getUint16(5),ThumbnailWidth:this.chunk.getUint8(7),ThumbnailHeight:this.chunk.getUint8(8)}}}a(et,"type","jfif"),a(et,"headerLength",9),x.set("jfif",et);class tt extends re{static canHandle(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}static findPosition(e,t){let i=super.findPosition(e,t);return i.chunkNumber=e.getUint8(t+16),i.chunkCount=e.getUint8(t+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return function(e){let t=function(e){let t=e[0].constructor,i=0;for(let a of e)i+=a.length;let n=new t(i),r=0;for(let a of e)n.set(a,r),r+=a.length;return n}(e.map(e=>e.chunk.toUint8()));return new v(t)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&m("ICC header is too short");for(let[t,i]of Object.entries(it)){t=parseInt(t,10);let n=i(this.chunk,t);"\0\0\0\0"!==n&&e.set(t,n)}}parseTags(){let e,t,i,n,r,{raw:a}=this,s=this.chunk.getUint32(128),o=132,l=this.chunk.byteLength;for(;s--;){if(e=this.chunk.getString(o,4),t=this.chunk.getUint32(o+4),i=this.chunk.getUint32(o+8),n=this.chunk.getString(t,4),t+i>l)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");r=this.parseTag(n,t,i),void 0!==r&&"\0\0\0\0"!==r&&a.set(e,r),o+=12}}parseTag(e,t,i){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,i);case"sig ":return this.parseSig(t)}if(!(t+i>this.chunk.byteLength))return this.chunk.getUint8Array(t,i)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return y(this.chunk.getString(e+12,t))}parseText(e,t){return y(this.chunk.getString(e+8,t-8))}parseSig(e){return y(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,i=t.getUint32(e+8),n=t.getUint32(e+12),r=e+16,a=[];for(let s=0;s<i;s++){let i=t.getString(r+0,2),s=t.getString(r+2,2),o=t.getUint32(r+4),l=t.getUint32(r+8)+e,c=y(t.getUnicodeString(l,o));a.push({lang:i,country:s,text:c}),r+=n}return 1===i?a[0].text:a}translateValue(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}a(tt,"type","icc"),a(tt,"multiSegment",!0),a(tt,"headerLength",18);const it={4:nt,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(e=>e.toString(10)).join(".")},12:nt,16:nt,20:nt,24:function(e,t){const i=e.getUint16(t),n=e.getUint16(t+2)-1,r=e.getUint16(t+4),a=e.getUint16(t+6),s=e.getUint16(t+8),o=e.getUint16(t+10);return new Date(Date.UTC(i,n,r,a,s,o))},36:nt,40:nt,48:nt,52:nt,64:(e,t)=>e.getUint32(t),80:nt};function nt(e,t){return y(e.getString(t,4))}x.set("icc",tt),L(U,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const rt={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},at={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};L(E,"icc",[[4,rt],[12,at],[40,Object.assign({},rt,at)],[48,rt],[80,rt],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class st extends re{static canHandle(e,t){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)}static headerLength(e,t,i){for(let r=0;r<i;r++)if(this.isIptcSegmentHead(e,t+r)){var n=e.getUint8(t+r+7);return n%2!=0&&(n+=1),0===n&&(n=4),r+8+n}}static isIptcSegmentHead(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}parse(){let{raw:e}=this,t=this.chunk.byteLength-1;for(let i=0;i<t;i++)if(28===this.chunk.getUint8(i)&&2===this.chunk.getUint8(i+1)){let t=this.chunk.getUint16(i+3),n=this.chunk.getUint8(i+2),r=this.chunk.getString(i+5,t);e.set(n,this.pluralizeValue(e.get(n),r)),i+=4+t}return this.translate(),this.output}pluralizeValue(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}a(st,"type","iptc"),a(st,"translateValues",!1),a(st,"reviveValues",!1),x.set("iptc",st),L(U,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),L(E,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);var ot=Je,lt=i("20d0"),ct=i.n(lt);function ut(e,t,i){var n=e.width,r=e.height;i.canvas&&i.dimensionSwapped&&(n=e.height,r=e.width);var a=document.createElement("canvas");a.width=n,a.height=r;var s=a.getContext("2d");return t&&i.canvas?(s.translate(n/2,r/2),s.rotate(i.rad),s.scale(i.scaleX,i.scaleY),s.drawImage(e,-e.width/2,-e.height/2,e.width,e.height)):(t&&i.css&&(a.style.transform="rotate(".concat(i.deg,"deg) scale(").concat(i.scaleX,", ").concat(i.scaleY,")")),s.drawImage(e,0,0)),a}var ft={name:"image-uploader",props:{id:{type:String,default:"fileInput"},maxWidth:{type:Number,default:1024},maxHeight:{type:Number,default:1024},maxSize:{type:Number,default:null},quality:{type:Number,default:1},scaleRatio:{type:Number,default:null},autoRotate:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},outputFormat:{type:String,default:"string"},className:{type:[String,Array],default:"fileinput"},capture:{type:[String,Boolean],default:!1},accept:{type:String,default:"image/*"},doNotResize:{type:[String,Array],default:function(){return[]}},debug:{type:Number,default:0}},data:function(){return{imagePreview:null,currentFile:{},dimensions:{},exifData:{}}},methods:{uploadFile:function(e){var t=e.target.files&&e.target.files.length?e.target.files[0]:null;t&&(this.emitLoad(),this.handleFile(t))},emitEvent:function(e){this.log("emitEvent() is called with output:",2,e),this.$emit("input",e),this.$emit("change",e)},emitLoad:function(){this.$emit("onUpload")},emitComplete:function(){this.$emit("onComplete")},handleFile:function(e){this.log("handleFile() is called with file:",2,e),this.currentFile=e;var t=e.type.split("/"),i="image"===t[0],n="string"===typeof this.doNotResize?[this.doNotResize]:this.doNotResize;if(!i||n.includes("*")||n.includes(t[1]))this.log("No Resize, return file directly"),this.emitEvent(e),this.emitComplete();else{var r=this,a=document.createElement("img"),s=new window.FileReader;s.onload=function(e){r.log("reader.onload() is triggered",2),a.src=e.target.result,a.onload=function(){r.log("img.onload() is triggered",2),ot.parse(a,{translateValues:!1}).then((function(e){r.exifData=e,0!==Object.keys(r.exifData).length&&r.log("ImageUploader: exif data found and extracted",2)})),ot.rotation(a).then((function(e){e&&r.log("ImageUploader: exif rotation found",2),r.scaleImage(a,e)}))}},s.readAsDataURL(e)}},scaleImage:function(e,t){this.log("scaleImage() is called",2);var i=ut(e,this.autoRotate,t),n=i.width/i.height,r=Math.min(this.maxWidth,n*this.maxHeight);if(this.maxSize>0&&this.maxSize<i.width*i.height/1e6){var a=Math.floor(1e3*Math.sqrt(this.maxSize*n));r=r>0?Math.min(r,a):a}this.scaleRatio&&(r=Math.min(r,Math.floor(this.scaleRatio*i.width))),this.dimensions.orgWidth=i.width,this.dimensions.orgHeight=i.height,this.dimensions.width=r,this.dimensions.height=Math.floor(r/n),this.log("ImageUploader: original image size = "+i.width+" X "+i.height),this.log("ImageUploader: scaled image size = "+r+" X "+Math.floor(r/n)),r<=0&&(r=1,console.warning("ImageUploader: image size is too small"));while(i.width>=2*r)i=this.getHalfScaleCanvas(i);i.width>r&&(i=this.scaleCanvasWithAlgorithm(i,r));var s="image/jpeg"===this.currentFile.type?this.quality:1,o=i.toDataURL(this.currentFile.type,s);"function"===typeof this.onScale&&this.onScale(o),this.log("New ImageData is ready",2),this.preview&&(this.imagePreview=o),this.emitEvent(this.formatOutput(o)),this.emitComplete()},scaleCanvasWithAlgorithm:function(e,t){var i=document.createElement("canvas"),n=t/e.width;i.width=e.width*n,i.height=e.height*n;var r=e.getContext("2d").getImageData(0,0,e.width,e.height),a=i.getContext("2d").createImageData(i.width,i.height);return this.applyBilinearInterpolation(r,a,n),i.getContext("2d").putImageData(a,0,0),i},applyBilinearInterpolation:function(e,t,i){function n(e,t,i,n,r,a){var s=1-r,o=1-a;return e*s*o+t*r*o+i*s*a+n*r*a}var r,a,s,o,l,c,u,f,h,d,p,g,m,y,S,b,C,v,w;for(r=0;r<t.height;++r)for(s=r/i,o=Math.floor(s),l=Math.ceil(s)>e.height-1?e.height-1:Math.ceil(s),a=0;a<t.width;++a)c=a/i,u=Math.floor(c),f=Math.ceil(c)>e.width-1?e.width-1:Math.ceil(c),h=4*(a+t.width*r),d=4*(u+e.width*o),p=4*(f+e.width*o),g=4*(u+e.width*l),m=4*(f+e.width*l),y=c-u,S=s-o,b=n(e.data[d],e.data[p],e.data[g],e.data[m],y,S),t.data[h]=b,C=n(e.data[d+1],e.data[p+1],e.data[g+1],e.data[m+1],y,S),t.data[h+1]=C,v=n(e.data[d+2],e.data[p+2],e.data[g+2],e.data[m+2],y,S),t.data[h+2]=v,w=n(e.data[d+3],e.data[p+3],e.data[g+3],e.data[m+3],y,S),t.data[h+3]=w},getHalfScaleCanvas:function(e){var t=document.createElement("canvas");return t.width=e.width/2,t.height=e.height/2,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t},formatOutput:function(e){if(this.log("ImageUploader: outputFormat: "+this.outputFormat),"file"===this.outputFormat)return this.currentFile;if("blob"===this.outputFormat)return"undefined"===typeof ct.a?(console.warn('Missing library! blueimp-canvas-to-blob.js must be loaded to output as "blob"'),console.warn("Falling back to default base64 dataUrl"),e):ct()(e);var t={name:this.currentFile.name,type:this.currentFile.type,newWidth:this.dimensions.width,newHeight:this.dimensions.height,orgWidth:this.dimensions.orgWidth,orgHeight:this.dimensions.orgHeight,aspectRatio:Math.round(this.dimensions.width/this.dimensions.height*100)/100,modifiedTimestamp:this.currentFile.lastModified,modifiedDate:this.currentFile.lastModifiedDate};if("info"===this.outputFormat)return t;if("verbose"===this.outputFormat){var i={dataUrl:e,info:t,exif:Object.keys(this.exifData).length>0?this.exifData:null};return i}return e},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.debug>=t&&(console.info(e),i&&console.info(i))}},created:function(){this.log("Initialised ImageUploader")}},ht=ft;function dt(e,t,i,n,r,a,s,o){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:e,options:c}}var pt=dt(ht,n,r,!1,null,null,null);t["a"]=pt.exports},"32e9":function(e,t,i){var n=i("86cc"),r=i("4630");e.exports=i("9e1e")?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"38fd":function(e,t,i){var n=i("69a8"),r=i("4bf8"),a=i("613b")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},"41a0":function(e,t,i){"use strict";var n=i("2aeb"),r=i("4630"),a=i("7f20"),s={};i("32e9")(s,i("2b4c")("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(s,{next:r(1,i)}),a(e,t+" Iterator")}},"456d":function(e,t,i){var n=i("4bf8"),r=i("0d58");i("5eda")("keys",(function(){return function(e){return r(n(e))}}))},4588:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,i){var n=i("be13");e.exports=function(e){return Object(n(e))}},5147:function(e,t,i){var n=i("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(r){}}return!0}},"520a":function(e,t,i){"use strict";var n=i("0bfb"),r=RegExp.prototype.exec,a=String.prototype.replace,s=r,o="lastIndex",l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e[o]||0!==t[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(e){var t,i,s,u,f=this;return c&&(i=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),l&&(t=f[o]),s=r.call(f,e),l&&s&&(f[o]=f.global?s.index+s[0].length:t),c&&s&&s.length>1&&a.call(s[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,i){var n=i("8378"),r=i("7726"),a="__core-js_shared__",s=r[a]||(r[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,i){var n=i("7726"),r=i("8378"),a=i("32e9"),s=i("2aba"),o=i("9b43"),l="prototype",c=function(e,t,i){var u,f,h,d,p=e&c.F,g=e&c.G,m=e&c.S,y=e&c.P,S=e&c.B,b=g?n:m?n[t]||(n[t]={}):(n[t]||{})[l],C=g?r:r[t]||(r[t]={}),v=C[l]||(C[l]={});for(u in g&&(i=t),i)f=!p&&b&&void 0!==b[u],h=(f?b:i)[u],d=S&&f?o(h,n):y&&"function"==typeof h?o(Function.call,h):h,b&&s(b,u,h,e&c.U),C[u]!=h&&a(C,u,d),y&&v[u]!=h&&(v[u]=h)};n.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"5dbc":function(e,t,i){var n=i("d3f4"),r=i("8b97").set;e.exports=function(e,t,i){var a,s=t.constructor;return s!==i&&"function"==typeof s&&(a=s.prototype)!==i.prototype&&n(a)&&r&&r(e,a),e}},"5eda":function(e,t,i){var n=i("5ca1"),r=i("8378"),a=i("79e5");e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],s={};s[e]=t(i),n(n.S+n.F*a((function(){i(1)})),"Object",s)}},"5f1b":function(e,t,i){"use strict";var n=i("23c6"),r=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var a=i.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"613b":function(e,t,i){var n=i("5537")("keys"),r=i("ca5a");e.exports=function(e){return n[e]||(n[e]=r(e))}},"626a":function(e,t,i){var n=i("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},6762:function(e,t,i){"use strict";var n=i("5ca1"),r=i("c366")(!0);n(n.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(e,t,i){var n=i("626a"),r=i("be13");e.exports=function(e){return n(r(e))}},"69a8":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"6a99":function(e,t,i){var n=i("d3f4");e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},7726:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(e,t,i){var n=i("4588"),r=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?r(e+t,0):a(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7f20":function(e,t,i){var n=i("86cc").f,r=i("69a8"),a=i("2b4c")("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},"7f7f":function(e,t,i){var n=i("86cc").f,r=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in r||i("9e1e")&&n(r,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},8378:function(e,t){var i=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,i){var n=i("cb7c"),r=i("c69a"),a=i("6a99"),s=Object.defineProperty;t.f=i("9e1e")?Object.defineProperty:function(e,t,i){if(n(e),t=a(t,!0),n(i),r)try{return s(e,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},"8b97":function(e,t,i){var n=i("d3f4"),r=i("cb7c"),a=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,i){return a(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:a}},9093:function(e,t,i){var n=i("ce10"),r=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},"9b43":function(e,t,i){var n=i("d8e8");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,i){var n=i("2b4c")("unscopables"),r=Array.prototype;void 0==r[n]&&i("32e9")(r,n,{}),e.exports=function(e){r[n][e]=!0}},"9def":function(e,t,i){var n=i("4588"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},"9e1e":function(e,t,i){e.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},aa77:function(e,t,i){var n=i("5ca1"),r=i("be13"),a=i("79e5"),s=i("fdef"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),f=function(e,t,i){var r={},o=a((function(){return!!s[e]()||l[e]()!=l})),c=r[e]=o?t(h):s[e];i&&(r[i]=c),n(n.P+n.F*o,"String",r)},h=f.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=f},aae3:function(e,t,i){var n=i("d3f4"),r=i("2d95"),a=i("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},ac6a:function(e,t,i){for(var n=i("cadf"),r=i("0d58"),a=i("2aba"),s=i("7726"),o=i("32e9"),l=i("84f2"),c=i("2b4c"),u=c("iterator"),f=c("toStringTag"),h=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var m,y=p[g],S=d[y],b=s[y],C=b&&b.prototype;if(C&&(C[u]||o(C,u,h),C[f]||o(C,f,y),l[y]=h,S))for(m in n)C[m]||a(C,m,n[m],!0)}},b0c5:function(e,t,i){"use strict";var n=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,i){var n=i("6821"),r=i("9def"),a=i("77f1");e.exports=function(e){return function(t,i,s){var o,l=n(t),c=r(l.length),u=a(s,c);if(e&&i!=i){while(c>u)if(o=l[u++],o!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},c5f6:function(e,t,i){"use strict";var n=i("7726"),r=i("69a8"),a=i("2d95"),s=i("5dbc"),o=i("6a99"),l=i("79e5"),c=i("9093").f,u=i("11e9").f,f=i("86cc").f,h=i("aa77").trim,d="Number",p=n[d],g=p,m=p.prototype,y=a(i("2aeb")(m))==d,S="trim"in String.prototype,b=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=S?t.trim():h(t,3);var i,n,r,a=t.charCodeAt(0);if(43===a||45===a){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+t}for(var s,l=t.slice(2),c=0,u=l.length;c<u;c++)if(s=l.charCodeAt(c),s<48||s>r)return NaN;return parseInt(l,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof p&&(y?l((function(){m.valueOf.call(i)})):a(i)!=d)?s(new g(b(t)),i,p):b(t)};for(var C,v=i("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;v.length>w;w++)r(g,C=v[w])&&!r(p,C)&&f(p,C,u(g,C));p.prototype=m,m.constructor=p,i("2aba")(n,d,p)}},c69a:function(e,t,i){e.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},ca5a:function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},cadf:function(e,t,i){"use strict";var n=i("9c6c"),r=i("d53b"),a=i("84f2"),s=i("6821");e.exports=i("01f9")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},cb7c:function(e,t,i){var n=i("d3f4");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,i){var n=i("69a8"),r=i("6821"),a=i("c366")(!1),s=i("613b")("IE_PROTO");e.exports=function(e,t){var i,o=r(e),l=0,c=[];for(i in o)i!=s&&n(o,i)&&c.push(i);while(t.length>l)n(o,i=t[l++])&&(~a(c,i)||c.push(i));return c}},d2c8:function(e,t,i){var n=i("aae3"),r=i("be13");e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(e))}},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},ebd6:function(e,t,i){var n=i("cb7c"),r=i("d8e8"),a=i("2b4c")("species");e.exports=function(e,t){var i,s=n(e).constructor;return void 0===s||void 0==(i=n(s)[a])?t:r(i)}},f6fd:function(e,t){(function(e){var t="currentScript",i=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(n){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(e in i)if(i[e].src==t||"interactive"==i[e].readyState)return i[e];return null}}})})(document)},fa5b:function(e,t,i){e.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,i){var n=i("7726").document;e.exports=n&&n.documentElement},fb15:function(e,t,i){"use strict";var n;(i.r(t),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1]));var r=i("2af9");i.d(t,"install",(function(){return r["b"]}));t["default"]=r["a"]},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}})["default"]}));